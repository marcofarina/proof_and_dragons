/* Stili generali e fallback font */
body {
    font-family: 'Inter', sans-serif;
    overscroll-behavior: none; /* Evita pull-to-refresh e overscroll glow */
}

.font-game {
    font-family: 'Press Start 2P', cursive;
}

/* Scrollbar personalizzate per WebKit (Chrome, Safari, Edge) */
.dark #timewallChain::-webkit-scrollbar-track {
    background: #1f2937;
}
.dark #timewallChain::-webkit-scrollbar-thumb {
    background: #374151;
}
.dark #timewallChain::-webkit-scrollbar-thumb:hover {
    background: #4b5563;
}

#timewallChain::-webkit-scrollbar {
    height: 8px; /* Mantenuta per lo scroll orizzontale */
}
#timewallChain::-webkit-scrollbar-track {
    background: #e5e7eb;
    border-radius: 10px;
}
#timewallChain::-webkit-scrollbar-thumb {
    background: #9ca3af;
    border-radius: 10px;
}
#timewallChain::-webkit-scrollbar-thumb:hover {
    background: #6b7280;
}

/* Stili per gli elementi interattivi */
.divisor-item {
    transition: all 0.2s ease-in-out;
    /* Padding e font size dei divisori potrebbero essere ridotti se necessario,
       ma per ora li lascio come sono e agisco sul min-height dei box principali */
}
.divisor-item.active {
    transform: scale(1.1);
}

.tx-item.selected {
    transform: scale(1.05);
}

/* Stili per le card dei blocchi e placeholder */
.block-card, .timewall-placeholder-slot {
    min-width: 280px; /* Leggermente ridotto se necessario per più spazio orizzontale */
    max-width: 320px; /* Leggermente ridotto */
    width: 100%;
    height: 100%; /* Questo farà sì che prenda l'altezza del genitore .timewallChain */
    min-height: 260px; /* Modifica: Ridotto da 300px per renderli più bassi */
    display: flex; /* Aggiunto per controllare meglio il contenuto interno se necessario */
    flex-direction: column; /* Aggiunto */
}

.block-card {
    animation: fadeInSlideIn 0.5s ease-out forwards;
    will-change: transform, opacity;
}

@keyframes fadeInSlideIn {
    from {
        opacity: 0;
        transform: translateX(30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

/* Layout responsivo per schermi grandi (lg) */
@media (min-width: 1024px) {
    html, body {
        height: 100%;
        overflow: hidden;
    }
    main {
        height: calc(100vh - 110px); /* Altezza header stimata, potrebbe essere necessario aggiustarla se l'header cambia */
    }
    /* I box della prima riga e calculationDetailsContainer prenderanno l'altezza dal contenuto.
       timewallContainer prenderà l'altezza rimanente nella griglia. */
    #calculationDetailsContainer, #timewallContainer {
        display: flex;
        flex-direction: column;
        overflow: hidden; /* Aggiunto per evitare che il contenuto interno causi scroll al contenitore del grid */
    }
    #calculationDetailsBox { /* Scroll interno per i dettagli se troppo lunghi */
        flex-grow: 1;
        overflow-y: auto;
        padding-right: 0.5rem; /* Spazio per la scrollbar */
    }
    #timewallChainContainer { /* Scroll orizzontale per la catena di blocchi */
        flex-grow: 1;
        /* overflow-y: hidden; /* Assicura che non ci sia scroll verticale qui */
        /* overflow-x: auto; /* Già gestito da #timewallChain */
    }
    #timewallChain {
        /* h-full fa sì che prenda l'altezza di timewallChainContainer */
        /* overflow-x-auto è già applicato via Tailwind */
        /* overflow-y-hidden importante per evitare che le card sforino verticalmente la chain */
        overflow-y: hidden;
    }
}

/* Stili per i Tooltip */
.tooltip {
    position: relative;
    display: inline-block;
}

.tooltip .tooltiptext {
    visibility: hidden;
    width: max-content;
    max-width: 220px;
    position: absolute;
    z-index: 10;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-top: 0.5rem;
    opacity: 0;
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
}

.tooltip:hover .tooltiptext,
.tooltip:focus-within .tooltiptext {
    visibility: visible;
    opacity: 1;
}


/* Stili per le icone delle transazioni */
.tx-icon {
    width: 28px; /* Ridotto */
    height: 28px; /* Ridotto */
    margin-top: 4px; /* Ridotto */
    object-fit: contain;
}
@media (min-width: 640px) { /* sm breakpoint */
    .tx-icon {
        width: 32px; /* Ridotto */
        height: 32px; /* Ridotto */
    }
}

/* Stili per il box dei dettagli di calcolo */
#calculationDetailsBox {
    font-size: 0.9rem; /* Ridotto leggermente */
    line-height: 1.4; /* Ridotto leggermente */
}
#calculationDetailsBox p {
    margin-bottom: 0.25rem; /* Ridotto */
    word-break: break-all;
}
#calculationDetailsBox p strong {
    font-weight: 600;
}

/* Stili per gli slot placeholder nella timewall */
.timewall-placeholder-slot {
    border-width: 2px;
    border-style: dashed;
    /* display: flex; già impostato sopra */
    align-items: center;
    justify-content: center;
    font-size: 1rem; /* Ridotto */
    text-align: center;
    padding: 0.75rem; /* Ridotto */
    border-radius: 0.5rem;
}

/* Stili per il menu hamburger */
#appMenu.menu-active {
    display: block;
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.2s ease-out, transform 0.2s ease-out;
}

#appMenu {
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 0.2s ease-out, transform 0.2s ease-out, display 0s 0.2s;
}

#resetGameButton.visible { /* Questa classe non è più usata per la visibilità, ma la lascio se serve per altro */
    display: block;
}

/* Assicurarsi che il contenuto delle card dei blocchi non causi overflow verticale */
.block-card > div:first-of-type { /* Il div che contiene i dettagli del blocco */
    flex-grow: 1;
    overflow-y: auto; /* Permette scroll interno se il contenuto è troppo */
    padding-bottom: 0.5rem; /* Spazio per non tagliare l'ultimo elemento */
}
